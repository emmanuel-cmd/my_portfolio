// Terrain Visualization

var dem = ee.Image('AHN/AHN2_05M_RUW'); 

// Change map style to HYBRID and center map on the Netherlands
Map.setOptions('HYBRID');
Map.setCenter(4.4082, 52.1775, 18);

// Visualize DEM using black-white color palette
var palette = ['black', 'white'];

var demRGB = dem.visualize({
    min: -5,
    max: 5,
    palette: palette
});

Map.addLayer(demRGB, {},'DEM');

// An important step to visualize terrain is 
// to add shadows created by a distant point source of light
// This is referred to as hillshading or shaded relief map

var utils = require('users/gena/packages:utils');
var weight = 0.4; // Weight of Hillshade vs RGB (0 - flat, 1 - hillshaded).
var exaggeration = 5; // Vertical exaggeration.
var azimuth = 315; // Sun azimuth.
var zenith = 20; // Sun elevation.
var brightness = -0.05; // 0 - default.
var contrast = 0.05; // 0 - default.
var saturation = 0.8; // 1 - default.
var castShadows = false;
var rgb = utils.hillshadeRGB(
  demRGB, 
  dem, 
  weight, 
  exaggeration, 
  azimuth, 
  zenith,
  contrast, 
  brightness, 
  saturation, 
  castShadows
);

Map.addLayer(rgb, {}, 'DEM (no shadows)'); 

// Standard hillshading only determines per pixel if it will be directed
// to the light or not
var castShadows = true;
var rgb = utils.hillshadeRGB(
    demRGB, dem, weight, exaggeration, azimuth, zenith,
    contrast, brightness, saturation, castShadows
);
Map.addLayer(rgb, {}, 'DEM (with shadows)');

// The final step is to add a topographic colormap
// To visualize topographic info, one usually uses a topo colormap

var palettes = require('users/gena/packages:palettes');
var palette = palettes.crameri.oleron[50];
var demRGB = dem.visualize({
    min: -5,
    max: 5,
    palette: palette
});
var castShadows = true;
var rgb = utils.hillshadeRGB(
  demRGB, dem, weight, exaggeration, azimuth, zenith,
  contrast, brightness, saturation, castShadows);
  
Map.addLayer(rgb, {}, 'DEM colormap');